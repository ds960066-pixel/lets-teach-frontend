<!DOCTYPE html>
<html>
<head>
  <title>Chat</title>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body>

<div id="box"></div>

<input id="msg">
<button onclick="send()">Send</button>

<script>
const p = new URLSearchParams(location.search);
const me = p.get("senderUid");
const other = p.get("receiverUid");

const socket = io("https://express-hello-world-uh96.onrender.com");

socket.on("receiveMessage", m => {
  const d = document.createElement("div");
  d.innerText = m.senderUid + ": " + m.text;
  box.appendChild(d);
});

function send() {
  socket.emit("sendMessage", {
    senderUid: me,
    receiverUid: other,
    text: msg.value,
    roomId: [me, other].sort().join("_")
  });
  msg.value = "";
}
</script>

</body>
</html>
